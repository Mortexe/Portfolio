(function(c){var d=function(a,b){this._pluginname="ProwlJS";this._container=b.containerClass||".prowl";this._target=null;this._toggle=b.toggleClass||".prowl-toggle";this._overlay=b.overlayClass||".prowl-overlay";this._modal=b.modalClass||".prowl-modal";this._isMobile=!1;void 0!=window.prowlToggles?this.removeBinding():this.reset();this._background=b.background||"rgba(12, 13, 13, 0.57)";this._animate="fade reveal swash drop".includes(b.animate)?b.animate:"fade";this._duration=b.duration||200;this._escape=
b.closeOnEscape||!0;this._state="open closed".includes(b.state)?b.state:this._toggle;this.cssTop=c(this._modal).css("top");this.cssMobileTop=0;this.cssLeft=c(this._modal).css("left");this.cssMobileLeft=0;this.cssBottom=c(this._modal).css("bottom");this.cssRight=c(this._modal).css("right");this.cssTransform=c(this._modal).css("-webkit-transform").split(/[()]/)[1];this._opts=b;a.addClass(this._toggle.substr(1));this.triggers();this.initiate(a)};d.prototype.initiate=function(a){var b=this,d=function(){"fixed"==
c(b._modal).css("position")?b._isMobile=!0:b._isMobile=!1;var a=c(b._modal).not(":hidden");1>a.length||(b._isMobile&&"0px"!=a[0].style.top?a.css({top:b.cssMobileTop,left:b.cssMobileLeft}):b._isMobile||a[0].style.top==b.cssTop||a.css({top:b.cssTop,left:b.cssLeft}))};this.validColor(this._background)&&c(this._overlay).css("background-color",this._background);"open"==this._state?this.triggerOpen():this.triggerClose();window.prowlEscape=c(document).keyup(function(a){return 27===a.keyCode&&"open"==b._state&&
1==b._escape&&b.triggerClose()});d();window.prowlMobile=c(window).resize(d);c(a).length&&(window.prowlToggles=c(a).bind("click",function(a){return b.toggle(a)}))};d.prototype.reset=function(){window.prowlToggles=null;window.prowlEscape=null;window.prowlMobile=null};d.prototype.removeBinding=function(){window.prowlToggles.unbind();window.prowlEscape.unbind();window.prowlMobile.unbind();c(this._modal).removeAttr("style")};d.prototype.triggers=function(){var a=this;c(this._container).on("open",function(b){a._state=
"open";c("body").addClass("locked");c(a._container).removeClass("opening closing closed").addClass("open").attr("data-prowl-state","open");if(void 0!==a._opts.onOpen)a._opts.onOpen(b)}).on("close",function(b){a._state="closed";c("body").removeClass("locked");c(a._container).removeClass("closing opening open").addClass("closed").attr("data-prowl-state","closed");if(void 0!==a._opts.onClose)a._opts.onClose(b)}).on("opening",function(b){a._state="opening";c(a._container).removeClass("opening closing closed").addClass("opening").attr("data-prowl-state",
"opening");if(void 0!==a._opts.onOpening)a._opts.onOpening(b)}).on("closing",function(b){a._state="closing";c(a._container).removeClass("opening closed open").addClass("closing").attr("data-prowl-state","closing");if(void 0!==a._opts.onClosing)a._opts.onClosing(b)})};d.prototype.triggerOpen=function(a){c(""+this._container).trigger("opening");this.open(a)};d.prototype.triggerClose=function(a){c(""+this._container).trigger("closing");this.close(a)};d.prototype.open=function(a){var b=this;c(this._container).fadeIn("fast",
function(){b.animate(a,"open",!1)})};d.prototype.close=function(a){var b=this;this.animate(a,"close",function(a){c(b._container).fadeOut("fast")})};d.prototype.animate=function(a,b,d){var e=this;void 0!==a&&(this._target=c.grep(c(this._modal),function(b){return c(b).data("prowl-id")==c(a.target).data("prowl-target")})[0]);switch(this._animate+"_"+b){case "fade_open":c(this._target).fadeIn(this._duration);break;case "fade_close":c(this._target).fadeOut(this._duration);break;case "reveal_open":c(this._target).css({top:this._isMobile?
this.cssMobileTop:this.cssTop,left:this._isMobile?this.cssMobileLeft:this.cssLeft}).slideDown(this._duration);break;case "reveal_close":c(this._target).slideUp(this._duration);break;case "drop_open":c(this._target).css({top:-c(this._target).height(),left:this._isMobile?this.cssMobileLeft:this.cssLeft,display:"block"}).animate({top:this._isMobile?this.cssMobileTop:this.cssTop},this._duration);break;case "drop_close":c(this._target).animate({top:-c(this._target).height()},this._duration,function(){c(e._target).hide()});
break;case "swash_open":c(this._target).css({top:this._isMobile?this.cssMobileTop:this.cssTop,left:-c(this._target).width(),display:"block"}).animate({left:this._isMobile?this.cssMobileLeft:this.cssLeft},this._duration);break;case "swash_close":c(this._target).animate({left:c(window).width()},this._duration,function(){return c(e._target).hide()})}"function"===typeof d?setTimeout(function(){c(e._container).trigger(b);d(e._animate+"_"+b)},this._duration):c(this._container).trigger(b)};d.prototype.toggle=
function(a){"open"==this._state?this.triggerClose():"closed"==this._state&&this.triggerOpen(a)};d.prototype.validColor=function(a){var b=document.createElement("div");b.style.color=a;return b.style.color.split(/\s+/).join("").toLowerCase()};d.prototype.getState=function(){return this._state};c.fn.prowl=function(a){a=a||{};var b=c(this);return new d(b,a)}})(jQuery);
